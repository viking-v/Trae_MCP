# MCP 使用公约（强制落地版）

## 目的
- 让信息在“同一处”可追踪、可审计、可度量
- 用流程门禁替代口头同步，降低协调成本

## 核心原则（必须）
- 单一事实来源：任务/缺陷/发布事项的状态以 MCP 为准
- 先建卡再开工：任何需求/缺陷/发布工作必须先创建对应条目
- 强关联：每个 PR 必须关联一个任务（Feature/Bug/Release）
- 可验收：每个条目必须写清“输出物+验收标准+截止时间”
- 可追溯：发布与回滚必须有记录（Checklist 与演练记录）

## 对象与命名
- Feature：面向用户/业务的新增与优化
- Bug：缺陷修复（按 P0/P1/P2/P3 分级）
- Release：一次上线变更集合（含 checklist、灰度、回滚、复盘）

标题格式（建议）：
- Feature：`[模块] 功能简述`
- Bug：`[P?][模块] 缺陷简述`
- Release：`[Release] YYYY-MM-DD 版本/窗口`

## 字段最小化（MVP）
强制字段上限：每类对象 ≤ 5 个业务字段（其余放描述里）。

## 流转规则（门禁）
- 未关联 PR 的任务：禁止进入 Done
- Release 未完成 Checklist：禁止进入“可发布”
- P0/P1 未清零：Release 禁止进入“可发布”
- 所有变更必须能回滚：无回滚方案的 Release 不允许上线

## PR 规范（强制）
- PR 必须包含关闭语句（示例）：`Closes #123`
- PR 必须包含：
  - 变更摘要
  - 风险点与回滚方式
  - 验证结果（测试/截图/接口调用）

## 会议与汇报（强制）
- 站会：仅看 MCP 看板，不允许口头“报进度但不落卡”
- 周报：必须由 MCP 报表/看板自动生成（禁止手工拼表）
- 阻塞：阻塞超过 24h 必须在 MCP 标记 `blocked` 并写明阻塞原因与推进人

## 缺陷分级与响应
- P0：阻断上线/核心链路不可用；响应 5 分钟内；必须立即创建 Bug 并关联 Release
- P1：高优先级；当天闭环或给出降级方案
- P2/P3：进入迭代池，明确排期

## 例外流程（紧急变更）
- 允许先修复后补卡的唯一情况：线上 P0 故障止血
- 止血后 30 分钟内补齐：
  - Bug/Release 条目
  - PR 关联
  - 复盘任务

## 数据度量（必须）
上线后每周输出：
- 吞吐量（完成任务数）
- Cycle Time（开发开始→完成）
- Lead Time（需求提出→完成）
- 阻塞 Top3 与行动项

